<!doctype html>
<html lang="en">
<head>

<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Restaurant menu</title>
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles.css') }}">

</head>
<body>

<header class="content">
  <h1 id="header-title">{{ restaurant.name }} Menu</h1>

  {% if "username" in session %}
  <ul class="log">
    <li><span>You're logged as {{ session["username"] }}</span></li>
    <li><a href="{{ url_for('gdisconnect') }}">Logout</a></li>
  </ul>
  {% else %}
  <ul class="log">
    <li><span>Login to edit or delete</span></li>
    <li><a href="{{ url_for('showLogin') }}" class="login">Login</a></li>
  </ul>
  {% endif %}
</header>

<main class="content">
  {% with messages = get_flashed_messages() %}
  {% if messages %}
  <ul>
    {% for message in messages %}
    <li><strong>{{ message }}</strong></li>
    {% endfor %}
  </ul>
  {% endif %}
  {% endwith %}

  <span>Restaurant owner: {{ creator.name }}</span>
  <br>
  <a href="{{ url_for('newMenuItem', restaurant_id=restaurant.id) }}">Create new menu item</a>

  <div>
    <h2>Appetizer</h2>
    {% for item in items %}
    {% if item.course == 'Appetizer' %}
    <ul class="items">
      <li><strong>{{ item.name }}</strong></li>
      <li>{{ item.description }}</li>
      <li>{{ item.price }}</li>
    </ul>
    <div class="change-buttons">
      {% if "username" in session %}
      <a href="{{ url_for('editMenuItem', restaurant_id=restaurant.id, menu_id=item.id) }}">Edit</a>
      <a href="{{ url_for('deleteMenuItem', restaurant_id=restaurant.id, menu_id=item.id) }}">Delete</a>
      {% endif %}
    </div>
    {% endif %}
    {% endfor %}
  </div>
  <div>
    <h2>Entree</h2>
    {% for item in items %}
    {% if item.course == 'Entree' %}
    <ul class="items">
      <li><strong>{{ item.name }}</strong></li>
      <li>{{ item.description }}</li>
      <li>{{ item.price }}</li>
    </ul>
    <div class="change-buttons">
      {% if "username" in session %}
      <a href="{{ url_for('editMenuItem', restaurant_id=restaurant.id, menu_id=item.id) }}">Edit</a>
      <a href="{{ url_for('deleteMenuItem', restaurant_id=restaurant.id, menu_id=item.id) }}">Delete</a>
      {% endif %}
    </div>
    {% endif %}
    {% endfor %}
  </div>
  <div>
    <h2>Dessert</h2>
    {% for item in items %}
    {% if item.course == 'Dessert' %}
    <ul class="items">
      <li><strong>{{ item.name }}</strong></li>
      <li>{{ item.description }}</li>
      <li>{{ item.price }}</li>
    </ul>
    <div class="change-buttons">
      {% if "username" in session %}
      <a href="{{ url_for('editMenuItem', restaurant_id=restaurant.id, menu_id=item.id) }}">Edit</a>
      <a href="{{ url_for('deleteMenuItem', restaurant_id=restaurant.id, menu_id=item.id) }}">Delete</a>
      {% endif %}
    </div>
    {% endif %}
    {% endfor %}
  </div>
  <div>
    <h2>Beverage</h2>
    {% for item in items %}
    {% if item.course == 'Beverage' %}
    <ul class="items">
      <li><strong>{{ item.name }}</strong></li>
      <li>{{ item.description }}</li>
      <li>{{ item.price }}</li>
    </ul>
    <div class="change-buttons">
      {% if "username" in session %}
      <a href="{{ url_for('editMenuItem', restaurant_id=restaurant.id, menu_id=item.id) }}">Edit</a>
      <a href="{{ url_for('deleteMenuItem', restaurant_id=restaurant.id, menu_id=item.id) }}">Delete</a>
      {% endif %}
    </div>
    {% endif %}
    {% endfor %}
  </div>
  <a href="{{ url_for('showRestaurants') }}">Return to restaurant list</a>
</main>

<footer>
  <a href="{{ url_for('restaurantMenuJSON', restaurant_id=restaurant.id) }}">API</a>
</footer>

</body>
</html>
